<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
  </head>

  <body>
      <div class="sp_wrap">
        <div class="sp_container">
          <div class="proc_bar">
            <ul class="proc_bar_box">
              <li>컨설팅 기본정보</li>
              <li>수행계획</li>
              <li style="background: #258ba4; color: #fff">
                <a href="./업무일지.html">업무일지</a>
              </li>
              <li><a href="./완료보고.html">완료보고</a></li>
              <li><a href="./산출물.html">산출물</a></li>
            </ul>
          </div>
          <div class="sr_box">
    
    
            <div class="cl">
              <p>컨설팅부문</p>
              <div>
      
                <input readonly type="text">
              </div>
            </div>
            <div class="cl">
      
              <p>수행컨설턴트</p>
              <div>
                <input readonly type="text">
              </div>
      
      
      
            </div>
            <div class="cl">
              <p>담당 PM</p>
              <div>
      
                <input readonly type="text">
              </div>
            </div>
            <div class="cl">
              <p>진행상태</p>
              <div>
      
                <input readonly type="text">
              </div>
            </div>
          </div>
          <div class="pj_table">
            <div class="cl_fr">
              <p>전체 1건 페이지 1/1</p>
      
            </div>
            <div class="pj_table_hd">
              <div class="tw5"><input type="checkbox" id="selectAll" onchange="toggleAllCheckboxes()"></div>
              <div class="tw5">순번</div>
              <div class="tw30">수행활동</div>
              <div class="tw5">상세보기</div>
              <div class="tw20">실제수행일정</div>
              <div class="tw10">승인여부</div>
              <div class="tw5">비고</div>
              <div class="tw20">특이사항</div>
            </div>
            <div class="pj_content_wrap">
              <div class="pj_content">
                <div class="tw5"><input type="checkbox" class="checkbox-item"></div>
                <div class="tw5">1</div>
                <div class="tw30">kick-off미팅, VOC 청취		</div>
                <div class="tw5"><button class="journal_search_btn">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="20px"
                    height="20px"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      d="M14.9536 14.9458L21 21M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
                      stroke="#000000"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </button></div>
                <div class="tw20"><input type="date" value="2024-04-03" /></div>
                <div class="tw10">여</div>
                <div class="tw5"></div>
                <div class="tw20">ㅇㅇㅇ</div>
              </div>
      
      
            </div>
            <script>
              function toggleAllCheckboxes() {
                var selectAllCheckbox = document.getElementById("selectAll");
                var checkboxes = document.querySelectorAll(".checkbox-item");
      
                for (var i = 0; i < checkboxes.length; i++) {
                  checkboxes[i].checked = selectAllCheckbox.checked;
                }
              }
            </script>
            <div class="pj_pagenation_wrap">
              <div class="first">
                <i class="fa-solid fa-angles-left"></i>
              </div>
              <div class="prev">
                <i class="fa-solid fa-angle-left"></i>
              </div>
              <p class="page_active">1</p>
              <p>2</p>
              <div class="next">
                <i class="fa-solid fa-angle-right"></i>
              </div>
              <div class="last">
                <i class="fa-solid fa-angles-right"></i>
              </div>
            </div>
          </div>
          
    
        <div class="overlay"></div>
        <div id="jouranl_search_modal">
          <div class="jouranl_search_title">
            <p>업무일지 작성</p>
            <span class="jouranl_search_modal_delete_btn">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="40px"
                height="40px"
                viewBox="0 0 24 24"
                fill="none"
              >
                <path
                  d="M16 8L8 16M8.00001 8L16 16"
                  stroke="#ffffff"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </span>
          </div>
          <div class="jouranl_search_content">
            <select id="jouranl_search_select">
              <option value="file">첨부파일로 제출</option>
              <option value="journal">일지작성으로 제출</option>
            </select>
    
            <!-- 첨부파일로 제출 -->
            <div class="jouranl_search_modal_file_wrap">
              <div class="jouranl_search_textarea">
                <div class="jouranl_search_textarea_title">
                  <p>업무일지</p>
                </div>
                <div class="jouranl_search_textarea_wrap">
                  <textarea
                    placeholder="수행내용은 첨부파일을 확인하시기 바랍니다"
                  ></textarea>
                </div>
              </div>
              <div class="jouranl_search_upload">
                <div class="jouranl_search_upload_title">
                  <p>첨부파일</p>
                </div>
                <div class="filebox">
                  <label for="file_01" class="upload-button">파일찾기</label>
                  <input
                    class="upload-name"
                    type="text"
                    placeholder="파일명"
                    readonly
                  />
                  <input
                    type="file"
                    id="file_01"
                    class="file"
                    title="파일 업로드"
                  />
                  <button class="file_delete_button">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="30px"
                      height="30px"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M16 8L8 16M8.00001 8L16 16"
                        stroke="#000000"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </button>
                </div>
                <div class="jouranl_search_upload_text_box">
                  <div class="jouranl_search_upload_text">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20px"
                      height="20px"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"
                      />
                      <path fill="none" d="M0 0h24v24H0z" />
                    </svg>
                    <p>
                      보고서 파일이 여러개운 경우, zip 파일로 압축하여 한개 파일로
                      제출해 주십시오
                    </p>
                  </div>
                  <div class="jouranl_search_upload_text">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="20px"
                      height="20px"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12.5 2.2a10.3 10.3 0 1 0 10.3 10.3A10.299 10.299 0 0 0 12.5 2.2zM12 7h1v7h-1zm.5 10.5a1 1 0 1 1 1-1 1.002 1.002 0 0 1-1 1z"
                      />
                      <path fill="none" d="M0 0h24v24H0z" />
                    </svg>
                    <p>파일용량 최대 nMB까지 업로드 가능합니다</p>
                  </div>
                </div>
              </div>
              <div class="jouranl_search_textarea_pm">
                <div class="jouranl_search_textarea_title">
                  <p>PM 멘트</p>
                </div>
                <div class="jouranl_search_textarea_wrap">
                  <textarea></textarea>
                </div>
              </div>
            </div>
    
            <!-- 일지작성으로 제출 -->
            <div class="jouranl_search_modal_write_wrap">
              <div class="jouranl_search_modal_write_title">
                <p>컨설팅 결과보고서</p>
              </div>
              <table class="jouranl_search_modal_write_table">
                <tbody>
                  <tr class="jouranl_search_modal_write_table_info">
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>기</span>
                        <span>업</span>
                        <span>명</span>
                      </div>
                    </td>
                    <td colspan="3">
                      <input type="text" id="company_name" name="company_name" />
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_info">
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>성</span>
                        <span>명</span>
                      </div>
                    </td>
                    <td>
                      <input type="text" id="name" name="name" />
                    </td>
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>직</span>
                        <span>위</span>
                      </div>
                    </td>
                    <td>
                      <input type="text" id="level" name="level" />
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_info">
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>컨</span>
                        <span>설</span>
                        <span>팅</span>
                        <span>일</span>
                        <span>시</span>
                      </div>
                    </td>
                    <td>
                      <input
                        type="text"
                        id="consulting_date"
                        name="consulting_date"
                      />
                    </td>
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>핸</span>
                        <span>드</span>
                        <span>폰</span>
                      </div>
                    </td>
                    <td>
                      <input type="text" id="phone_num" name="phone_num" />
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_info">
                    <td>
                      <div class="jouranl_search_modal_write_text_align">
                        <span>컨</span>
                        <span>설</span>
                        <span>턴</span>
                        <span>트</span>
                      </div>
                    </td>
                    <td>
                      <span>성명: </span>
                      <input type="text" id="mentor_name" name="mentor_name" />
                    </td>
                    <td colspan="2" style="background: none">
                      <span>소속: </span>
                      <input type="text" id="group" name="group" />
                    </td>
                  </tr>
    
                  <tr class="jouranl_search_modal_write_table_detail">
                    <td colspan="4" style="padding: 5px 0">주요내용</td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_detail">
                    <td>컨설팅분야</td>
                    <td colspan="3">
                      <textarea
                        id="tagName"
                        class="jouranl_search_modal_write_table_textarea"
                        placeholder="모든 텍스트를 한눈에 보려면 밑 아이콘으로 크기를 늘려주세요"
                      ></textarea>
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_detail">
                    <td>
                      컨실팅 주제<br />
                      및 내용
                    </td>
                    <td colspan="3" style="line-height: 24px">
                      <textarea
                        id="subject"
                        class="jouranl_search_modal_write_table_textarea"
                        placeholder="모든 텍스트를 한눈에 보려면 밑 아이콘으로 크기를 늘려주세요"
                      ></textarea>
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_detail">
                    <td>기타소견</td>
                    <td colspan="3">
                      <textarea
                        id="etc"
                        class="jouranl_search_modal_write_table_textarea"
                        placeholder="모든 텍스트를 한눈에 보려면 밑 아이콘으로 크기를 늘려주세요"
                      ></textarea>
                    </td>
                  </tr>
                  <tr class="jouranl_search_modal_write_table_detail">
                    <td>관련사진</td>
                    <td colspan="3">
                      <input
                        type="file"
                        id="related_photo"
                        name="related_photo"
                        accept="image/*"
                      />
                      <img
                        id="image_preview"
                        src="#"
                        alt="Image Preview"
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
              <div class="jouranl_search_modal_write_check">
                <div class="jouranl_search_modal_write_check_submit">
                  <p>위와 같이 컨설팅 결과보고서를 제출합니다</p>
                </div>
                <div class="jouranl_search_modal_write_check_date">
                  <input type="date" value="2024-01-01" />
                </div>
                <div class="jouranl_search_modal_write_check_mentor">
                  <span> 컨설턴트 : </span>
                  <input type="text" /> (인)
                </div>
              </div>
            </div>
            <div class="modal-btn-wrap">
              <div class="close_b">취소</div>
              <div class="confilrm">저장</div>
          </div>
          </div>
        </div>
        </div>
      </div>
  </body>

  <script>
    // 모달창 닫기 및 열기
    const jouranlSearchModalDeleteBtn = document.querySelector(
      ".jouranl_search_modal_delete_btn"
    );
    const jouranlSearchModalDeleteBtn2 = document.querySelector(
      ".close_b"
    );
    const jouranlSearchModal = document.getElementById("jouranl_search_modal");
    const journalSearchBtn = document.querySelector(".journal_search_btn");
    const overlay = document.querySelector(".overlay");
    jouranlSearchModalDeleteBtn.addEventListener("click", function () {
      jouranlSearchModal.classList.remove("active");
      overlay.classList.remove("active");
    });
    
    jouranlSearchModalDeleteBtn2.addEventListener("click", function () {
      jouranlSearchModal.classList.remove("active");
      overlay.classList.remove("active");
    });
    
    overlay.addEventListener("click", function () {
      jouranlSearchModal.classList.remove("active");
      overlay.classList.remove("active");
    });
    journalSearchBtn.addEventListener("click", function () {
      jouranlSearchModal.classList.add("active");
      overlay.classList.add("active");
    });

    // 제출 방식에 따라 화면 전환
    const submitSelect = document.getElementById("jouranl_search_select");

    const fileWrap = document.querySelector(".jouranl_search_modal_file_wrap");
    const writeWrap = document.querySelector(
      ".jouranl_search_modal_write_wrap"
    );

    fileWrap.style.display = "block";
    writeWrap.style.display = "none";

    submitSelect.addEventListener("change", function () {
      const selectOption = submitSelect.value;

      if (selectOption === "file") {
        fileWrap.style.display = "block";
        writeWrap.style.display = "none";
      } else if (selectOption === "journal") {
        fileWrap.style.display = "none";
        writeWrap.style.display = "block";
      }
    });

    // 파일 업로드
    let fileInput = document.querySelector(".filebox .file");
    let nameInput = document.querySelector(".filebox .upload-name");
    fileInput.addEventListener("change", function (e) {
      const input = e.target.closest(".file");
      if (!input) return;
      let fileName = input.value.split("/").pop().split("\\").pop();
      nameInput.value = fileName;
    });

    // textarea 마우스 포커스시 placeholder 텍스트 숨김
    const tagName = document.getElementsByClassName(
      "jouranl_search_modal_write_table_textarea"
    );

    for (let i = 0; i < tagName.length; i++) {
      tagName[i].addEventListener("focus", function () {
        this.removeAttribute("placeholder");
      });
      tagName[i].addEventListener("blur", function () {
        this.setAttribute(
          "placeholder",
          "모든 텍스트를 한눈에 보려면 밑 아이콘으로 크기를 늘려주세요"
        );
      });
    }

    // 업로드 파일 삭제
    const uploadDeleteBtn = document.querySelector(".file_delete_button");
    const uploadNameInput = document.querySelector(".upload-name");
    const fileBox = document.querySelector(".file");

    uploadDeleteBtn.addEventListener("click", function () {
      if (uploadNameInput.value) {
        if (confirm("업로드한 파일을 삭제하시겠습니까?")) {
          fileBox.value = "";
          uploadNameInput.value = "";
        } else {
          return;
        }
      } else {
        alert("업로드된 파일이 없습니다");
      }
    });

    // 관련사진란 이미지 업로드
    const relatedPhoto = document.getElementById('related_photo');
    relatedPhoto.addEventListener("change", function(){
      const file = this.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (e) {
            document.getElementById("image_preview").src = e.target.result;
            document.getElementById("image_preview").style.display = "block";
          };
          reader.readAsDataURL(file);
        }
    })
  </script>

  
<script>
  // 모달 열기
  document.getElementById('modal_btn').addEventListener('click', function () {
      document.getElementById('modal_a').style.display = 'flex';
  });

  // 모달 닫기
  document.getElementsByClassName('close')[0].addEventListener('click', function () {
      document.getElementById('modal_a').style.display = 'none';
  });

  // 모달 닫기
  document.getElementsByClassName('close_b')[0].addEventListener('click', function () {
      document.getElementById('modal_a').style.display = 'none';
  });

  // 모달 바깥을 클릭하면 모달 닫기
  window.addEventListener('click', function (event) {
      var modal = document.getElementById('modal_a');
      if (event.target == modal) {
          modal.style.display = 'none';
      }
  });
</script>

</html>
